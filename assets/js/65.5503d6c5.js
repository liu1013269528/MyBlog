(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{280:function(t,s,a){"use strict";a.r(s);var n=a(38),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"centos-下-git-私有化部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos-下-git-私有化部署","aria-hidden":"true"}},[t._v("#")]),t._v(" CentOS 下 git 私有化部署")]),t._v(" "),a("blockquote",[a("p",[t._v("安装 git")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" curl-devel expat-devel gettext-devel openssl-devel zlib-devel perl-devel\n$ yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("创建用户组和用户")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("groupadd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n$ adduser "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#添加git用户，名称可以自己设置，不一定要用git")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改git用户的密码")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("创建用户 git 相关目录与权限")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" git:git git/\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home/git/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" .ssh\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("700")]),t._v(" .ssh\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" .ssh/authorized_keys\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),t._v(" .ssh/authorized_keys\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R git:git /home/git/.ssh  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置目录和目录下的authorized_keys文件的拥有者和群组")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("初始化项目")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home/www/sdb/git_warhouse/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init --bare project.git\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改 仓库 归属")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R git:git project.git\nInitialized empty Git repository "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /home/gitrepo/runoob.git/\n")])])]),a("blockquote",[a("p",[t._v("同步本地同步代码")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone ssh://git@121.8.178.114:58022/home/www/sdb/git_warhouse/project.git\n")])])]),a("blockquote",[a("p",[t._v("关闭git用户的ssh shell登陆(Remote)")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/passwd\n$ git:x:501:501::/home/git:/bin/bash  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#[原来]")]),t._v("\n$ git:x:501:501::/home/git:/usr/bin/git-shell  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#找到git用户，在最后添加")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#这时候就不能通过shell使用git账号登陆")]),t._v("\n")])])])])},[],!1,null,null,null);s.default=e.exports}}]);