(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{324:function(e,a,t){"use strict";t.r(a);var r=t(38),s=Object(r.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"flutter-发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flutter-发布","aria-hidden":"true"}},[e._v("#")]),e._v(" Flutter 发布")]),e._v(" "),t("h2",{attrs:{id:"一、安卓发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安卓发布","aria-hidden":"true"}},[e._v("#")]),e._v(" 一、安卓发布")]),e._v(" "),t("h3",{attrs:{id:"_1-app-名称与图标设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-app-名称与图标设置","aria-hidden":"true"}},[e._v("#")]),e._v(" 1.  APP 名称与图标设置")]),e._v(" "),t("blockquote",[t("p",[e._v("APP名称：AndroidManifest.xml 修改")])]),e._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[e._v('<application\n        android:usesCleartextTraffic="true"\n        android:name="io.flutter.app.FlutterApplication"\n        android:label="优米社" -- App 名字\n')])])]),t("blockquote",[t("p",[e._v("设置 snapshot 名字 （多任务显示名字）：main.dart 文件修改")])]),e._v(" "),t("div",{staticClass:"language-dart extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("MaterialApp")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("\n  title"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'优米社'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),t("h3",{attrs:{id:"_2-检查和配置-build-gradle-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-检查和配置-build-gradle-文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 2. 检查和配置 build.gradle 文件")]),e._v(" "),t("blockquote",[t("p",[e._v("applicationId")])]),e._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[e._v('// 位置在 app 的 build.gradle 中\n// App的唯一标识\napplicationId "com.umiclub.umiapp"\n// 编译版本\ncompileSdkVersion 28 \n// 发布版本\ntargetSdkVersion 28 \n// 最小版本号\nminSdkVersion 16\n\n')])])]),t("blockquote",[t("p",[e._v("versionCode & versionName")])]),e._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[e._v("// 版本号\nversionCode flutterVersionCode.toInteger()\n// 版本名\nversionName flutterVersionName\n")])])]),t("h3",{attrs:{id:"_3-app签名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-app签名","aria-hidden":"true"}},[e._v("#")]),e._v(" 3. App签名")]),e._v(" "),t("blockquote",[t("p",[e._v("签名 key")])]),e._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[e._v("1）创建证书，build -> generate signed bundle / apk\n2）填写 下列信息\n文件名: umi_app_key_store\n密码: 900629\nAlias: umi_key\n密码: 900629\n3）创建 key.properties 文件：以 project 方式显示项目，在 android 目录下创建 Resource Bundle 类型文件\nstorePassword=900629\nkeyPassword=900629\nkeyAlias=umi_key\n# 这个路径是以 android/app/build.gradle 文件的相对路径\nstoreFile=../umi_app_key_store\n4）在 android/app/build.gradle 的 android { 节点上面 添加如下内容\n// 设置 签名信息\ndef keystoreProperties = new Properties()\ndef keystorePropertiesFile = rootProject.file('key.properties')\nif (keystorePropertiesFile.exists()) {\n    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))\n}\n\nandroid {\n    // 编译版本\n    compileSdkVersion 28\n5）在 android 节点下，增加如下内容\nandorid {\n\t```\n\t// 设置签名参数\n    signingConfigs {\n        release {\n            keyAlias keystoreProperties['keyAlias']\n            keyPassword keystoreProperties['keyPassword']\n            storeFile file(keystoreProperties['storeFile'])\n            storePassword keystoreProperties['storePassword']\n        }\n    }\n\n    // 打包\n    buildTypes {\n        release {\n            // TODO: Add your own signing config for the release build.\n            // Signing with the debug keys for now, so `flutter run --release` works.\n            // signingConfig signingConfigs.debug\n            signingConfig signingConfigs.release\n        }\n    }\n\n")])])]),t("h3",{attrs:{id:"_4-打包命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-打包命令","aria-hidden":"true"}},[e._v("#")]),e._v(" 4. 打包命令")]),e._v(" "),t("div",{staticClass:"language-she extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// 打包 64 位机子\nflutter build apk --release --target-platform android-arm64\n// 打包 32 位机子\nflutter build apk --release --target-platform android-arm\n")])])])])},[],!1,null,null,null);a.default=s.exports}}]);