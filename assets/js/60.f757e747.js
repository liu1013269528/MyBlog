(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{283:function(t,a,e){"use strict";e.r(a);var s=e(38),r=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"记录我的博客服务器搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#记录我的博客服务器搭建","aria-hidden":"true"}},[t._v("#")]),t._v(" 记录我的博客服务器搭建")]),t._v(" "),e("h3",{attrs:{id:"写在前面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#写在前面","aria-hidden":"true"}},[t._v("#")]),t._v(" 写在前面")]),t._v(" "),e("p",[t._v("最近由于不可描述的原因服务器一度被河蟹，上周末有时间，科学上网，找回自己的以前的数据，重新部署了服务器，现在就我部署过程，做一次复盘。")]),t._v(" "),e("h2",{attrs:{id:"服务器选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器选择","aria-hidden":"true"}},[t._v("#")]),t._v(" 服务器选择")]),t._v(" "),e("p",[t._v("服务器我选择的参数如下:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("产品：Digital Ocean （国外VPS服务器)\n规格：选择 5$/month \n系统：CentOS 7.4\n")])])]),e("blockquote",[e("p",[t._v("邀请链接")])]),t._v(" "),e("p",[t._v("通过"),e("a",{attrs:{href:"https://m.do.co/c/f3624f2d2d21",target:"_blank",rel:"noopener noreferrer"}},[t._v("邀请链接（点击）"),e("OutboundLink")],1),t._v("，可以享受 10美元的补贴，也就是 免费试用两个月。")]),t._v(" "),e("h2",{attrs:{id:"域名选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#域名选择","aria-hidden":"true"}},[t._v("#")]),t._v(" 域名选择")]),t._v(" "),e("p",[t._v("我是在 "),e("a",{attrs:{href:"https://www.aliyun.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云"),e("OutboundLink")],1),t._v(" 上购买并实名制域名的")]),t._v(" "),e("h2",{attrs:{id:"博客选择"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#博客选择","aria-hidden":"true"}},[t._v("#")]),t._v(" 博客选择")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://cn.wordpress.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("wordpress"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"服务器运行环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器运行环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 服务器运行环境")]),t._v(" "),e("blockquote",[e("p",[t._v("LNMP 一键部署")])]),t._v(" "),e("p",[t._v("自己尝试过代建 LAMP 和 LNMP，后来发现 LNMP 一键安装很符合我，教程简单。如果喜欢自己搭建，我博客也有相关的教程供大家使用。")]),t._v(" "),e("h2",{attrs:{id:"lnmp-搭建教程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lnmp-搭建教程","aria-hidden":"true"}},[t._v("#")]),t._v(" LNMP 搭建教程")]),t._v(" "),e("blockquote",[e("ol",[e("li",[t._v("安装 wget")])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("yum -y install wget\n")])])]),e("blockquote",[e("ol",{attrs:{start:"2"}},[e("li",[t._v("安装 LNMP 稳定版（要耐心等待安装）\n安装过程中会涉及到让你填写配置参数，例如：数据库版本，PHP 版本，缓存机制，数据库密码等。"),e("a",{attrs:{href:"https://lnmp.org/install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("请参考官网教程"),e("OutboundLink")],1)])])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("wget -c http://soft.vpser.net/lnmp/lnmp1.4.tar.gz && tar zxf lnmp1.4.tar.gz && cd lnmp1.4 && ./install.sh lnmp\n")])])]),e("blockquote",[e("ol",{attrs:{start:"3"}},[e("li",[t._v("检测安装")])])]),t._v(" "),e("p",[t._v("访问 http://你的IP  能够看到 LNMP 一键安装字样，即可。")]),t._v(" "),e("blockquote",[e("ol",{attrs:{start:"4"}},[e("li",[t._v("数据库远程连接")])])]),t._v(" "),e("p",[t._v("这一节是重点，主要涉及两个知识：Mysql 远程账户的创建 和 CentoS 端口开放")]),t._v(" "),e("blockquote",[e("p",[t._v("4.1 Mysql 远程账户的创建")])]),t._v(" "),e("p",[t._v("例如：我预设的远程 Mysql 登录账号名跟密码为 noasis")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// 在 CentOS 控制台进入 Mysql \nmysql -uroot -p\n// 输入密码（上面部署时需要）\n******\n// 创建一个 Mysql 账号（账号名密码：noasis）\ncreate user noasis@'localhost' identified by 'noasis';\n// 赋予此账号远程登录权限\nGRANT ALL PRIVILEGES ON *.* TO 'noasis'@'%' IDENTIFIED BY 'noasis' WITH GRANT OPTION;\n// 更新 Mysql\nFLUSH PRIVILEGES;\n")])])]),e("p",[t._v("另外：如果先要禁止远程登录，只需要在 mysql 数据库中 user 表中删除 noasis 记录即可。")]),t._v(" "),e("blockquote",[e("p",[t._v("4.2 CentOS 端口 开发（主要是 22,3306,80）")])]),t._v(" "),e("p",[t._v("在使用 Navicat 远程数据库登录时，发现 10038 错误，主要因为服务器 3306 端口开放问题。")]),t._v(" "),e("h4",{attrs:{id:"centos-7-0默认使用的是firewall作为防火墙，这里改为iptables防火墙。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-0默认使用的是firewall作为防火墙，这里改为iptables防火墙。","aria-hidden":"true"}},[t._v("#")]),t._v(" CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。")]),t._v(" "),e("blockquote",[e("p",[t._v("1、关闭firewall：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("systemctl stop firewalld.service\nsystemctl disable firewalld.service\nsystemctl mask firewalld.service\n")])])]),e("blockquote",[e("p",[t._v("2、安装iptables防火墙")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("yum install iptables-services -y\n")])])]),e("blockquote",[e("p",[t._v("3.启动设置防火墙")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# systemctl enable iptables\n# systemctl start iptables\n")])])]),e("blockquote",[e("p",[t._v("4.查看防火墙状态")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("systemctl status iptables\n")])])]),e("blockquote",[e("p",[t._v("5编辑防火墙，增加端口")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("vi /etc/sysconfig/iptables #编辑防火墙配置文件\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT\n:wq! #保存退出\n")])])]),e("blockquote",[e("p",[t._v("6.重启配置，重启系统")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("systemctl restart iptables.service #重启防火墙使配置生效\nsystemctl enable iptables.service #设置防火墙开机启动\n")])])]),e("h2",{attrs:{id:"lnmp-服务器部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lnmp-服务器部署","aria-hidden":"true"}},[t._v("#")]),t._v(" LNMP  服务器部署")]),t._v(" "),e("p",[t._v("其实就是 按照 LNMP 官网介绍即可。"),e("a",{attrs:{href:"https://lnmp.org/faq/lnmp-vhost-add-howto.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网教程"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("注意两点：")]),t._v(" "),e("blockquote",[e("p",[t._v("项目的存储位置：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// 进入路径\ncd /home/wwwroot/\n// 查看文件列表\nls\n")])])]),e("blockquote",[e("p",[t._v("项目对应的 Nginx 配置文件")])]),t._v(" "),e("p",[t._v("涉及到重写配置，以及 Nginx 的其他配置")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cd /usr/local/nginx/conf/vhost\nls\n")])])]),e("h2",{attrs:{id:"最后的小提示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最后的小提示","aria-hidden":"true"}},[t._v("#")]),t._v(" 最后的小提示")]),t._v(" "),e("p",[t._v("由于选择的服务器是国外，所以代码上传是一个障碍，速度很不理想，我的建议是在 "),e("a",{attrs:{href:"https://github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("github"),e("OutboundLink")],1),t._v(" 或者 "),e("a",{attrs:{href:"https://gitee.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("码云"),e("OutboundLink")],1),t._v(" 上创建一个项目，将 通过 git 的方式 同步到服务器上")])])},[],!1,null,null,null);a.default=r.exports}}]);