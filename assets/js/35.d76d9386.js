(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{325:function(_,e,t){"use strict";t.r(e);var r=t(38),s=Object(r.a)({},function(){var _=this,e=_.$createElement,t=_._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"设计数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设计数据库","aria-hidden":"true"}},[_._v("#")]),_._v(" 设计数据库")]),_._v(" "),t("p",[_._v("思考场景，在纸上画出所有模块，设计成单表，然后在思考表与表中的关系，确立 1对1、1对多、多对多")]),_._v(" "),t("h2",{attrs:{id:"一、表关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、表关系","aria-hidden":"true"}},[_._v("#")]),_._v(" 一、表关系")]),_._v(" "),t("blockquote",[t("p",[_._v("重点")])]),_._v(" "),t("h2",{attrs:{id:"二、表结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、表结构","aria-hidden":"true"}},[_._v("#")]),_._v(" 二、表结构")]),_._v(" "),t("blockquote",[t("p",[_._v("主要是为表设计字段")])]),_._v(" "),t("p",[_._v("需要考虑表与表之间的关系，如下：")]),_._v(" "),t("p",[_._v("1对多表，设计到两张表 例如： tb_user 与 tb_user_type, tb_user.type_id = tb_user_type.id")]),_._v(" "),t("p",[_._v("多对多表，则需要三张表，人（user） 与 房子（house）, 一个人可以有多间房子，一间房子可以住多个人。")]),_._v(" "),t("p",[_._v("则需要 tb_user 人基础表 、tb_house 房子基础表 以及 tb_user_house 用户 房子 关系表")]),_._v(" "),t("p",[_._v("tb_user.id = tb_user_house.user_id")]),_._v(" "),t("p",[_._v("tb_house.id = tb_user_house.house.id")]),_._v(" "),t("p",[_._v("注意：我们其实发现 tb_user_house.user_id 和 tb_user_house.house_id 应该不能有多次，其实可以设计一个唯一索引这两个字段（UNIQUE KEY）可以避免造成不必要的重复")]),_._v(" "),t("p",[_._v("UNIQUE KEY 'user_id_house_id_index' ('user_id', 'house_id') USING BTREE")]),_._v(" "),t("h2",{attrs:{id:"三、唯一索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、唯一索引","aria-hidden":"true"}},[_._v("#")]),_._v(" 三、唯一索引")]),_._v(" "),t("p",[_._v("UNIQUE KEY 'order_no_index' ('order_no') USING BTREE")]),_._v(" "),t("h2",{attrs:{id:"四、单索引以及组合索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、单索引以及组合索引","aria-hidden":"true"}},[_._v("#")]),_._v(" 四、单索引以及组合索引")]),_._v(" "),t("blockquote",[t("p",[_._v("加快查询速度")])]),_._v(" "),t("p",[_._v("通过常规的查询条件，来判断那些字段需要添加所有，一般需要查询的单字段需要单索引，组合查询字段，则需要组合索引")]),_._v(" "),t("p",[_._v("KEY 'order_no_index' (order_no) USING BTREE")]),_._v(" "),t("p",[_._v("KEY 'order_no_user_id_index' (order_no, user_id) USING BTREE")]),_._v(" "),t("h2",{attrs:{id:"五、时间戳"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、时间戳","aria-hidden":"true"}},[_._v("#")]),_._v(" 五、时间戳")]),_._v(" "),t("p",[_._v("排查线上问题")]),_._v(" "),t("p",[_._v("create_time, update_time 这些记录时间，对于数据排查，数据统计都有很重要的作用")])])},[],!1,null,null,null);e.default=s.exports}}]);