(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{273:function(t,a,s){"use strict";s.r(a);var e=s(38),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"php-服务器搭建全攻略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#php-服务器搭建全攻略","aria-hidden":"true"}},[t._v("#")]),t._v(" PHP 服务器搭建全攻略")]),t._v(" "),s("h4",{attrs:{id:"写在前面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写在前面","aria-hidden":"true"}},[t._v("#")]),t._v(" 写在前面")]),t._v(" "),s("p",[t._v("本次主要记录，我作为一个PHP后端开发者如果从零部署一台阿里云服务器到生产的。")]),t._v(" "),s("p",[t._v("另外，本文重点是记录服务器（系统：CentOS 7.*）配置相关操作，其他操作都会简单介绍一下。")]),t._v(" "),s("h2",{attrs:{id:"主要步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主要步骤","aria-hidden":"true"}},[t._v("#")]),t._v(" 主要步骤")]),t._v(" "),s("ol",[s("li",[t._v("阿里云平台购买服务器（ECS）和 域名（略）")]),t._v(" "),s("li",[t._v("阿里云服务器管理后台开放端口")]),t._v(" "),s("li",[t._v("阿里云域名解析")]),t._v(" "),s("li",[t._v("一键安装 LNMP")]),t._v(" "),s("li",[t._v("开放服务器端口（iptables）")]),t._v(" "),s("li",[t._v("添加一个WEB服务")]),t._v(" "),s("li",[t._v("创建 MySQL 远程登录账号")]),t._v(" "),s("li",[t._v("Git 常规操作")])]),t._v(" "),s("h3",{attrs:{id:"_1-阿里云平台购买服务器（ecs）和-域名（略）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-阿里云平台购买服务器（ecs）和-域名（略）","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.阿里云平台购买服务器（ECS）和 域名（略）")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.aliyun.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("购买地址"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_2-阿里云服务器管理后台开放端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-阿里云服务器管理后台开放端口","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.阿里云服务器管理后台开放端口")]),t._v(" "),s("blockquote",[s("p",[t._v("国内很多云服务供应商，目前我知道的（天翼云，百度云，阿里云）都需要在云平台事先开通服务器需要的指定端口，服务器才能生效。")])]),t._v(" "),s("p",[t._v("主要步骤")]),t._v(" "),s("ol",[s("li",[t._v("登录阿里云管理后台")]),t._v(" "),s("li",[t._v("进入示例管理")]),t._v(" "),s("li",[t._v("在指定服务器后面进入网络和安全组")]),t._v(" "),s("li",[t._v("配置规则即可，主要开放端口")])]),t._v(" "),s("p",[t._v("常用的端口介绍")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("端口")]),t._v(" "),s("th",[t._v("介绍")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("22")]),t._v(" "),s("td",[t._v("SSH 端口远程登录服务器")])]),t._v(" "),s("tr",[s("td",[t._v("80")]),t._v(" "),s("td",[t._v("http 默认端口，国内服务器需要备案才能使用")])]),t._v(" "),s("tr",[s("td",[t._v("443")]),t._v(" "),s("td",[t._v("https 默认端口")])]),t._v(" "),s("tr",[s("td",[t._v("3306")]),t._v(" "),s("td",[t._v("数据库默认端口")])])])]),t._v(" "),s("p",[t._v("注意：如果想要安全，其实可以为不同服务配置非默认端口，降低服务器被攻击的风险，不过需要修改对应服务的配置文件，这里不详细介绍。")]),t._v(" "),s("h3",{attrs:{id:"_3-阿里云域名解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-阿里云域名解析","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. 阿里云域名解析")]),t._v(" "),s("p",[t._v("阿里云域名解析也很简单，顾名思义：通过域名指向服务器，以达到域名可以访问服务器的效果。")]),t._v(" "),s("p",[t._v("步骤：")]),t._v(" "),s("ol",[s("li",[t._v("登录阿里云管理后台")]),t._v(" "),s("li",[t._v("在域名管理，在指定域名选择域名解析")]),t._v(" "),s("li",[t._v("根据提示选择指定解析方式（都有详细说明）")])]),t._v(" "),s("h3",{attrs:{id:"_4-一键安装-lnmp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-一键安装-lnmp","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. 一键安装 LNMP")]),t._v(" "),s("p",[t._v("主要使用 LNMP一键安装，这套东西我用了很久了，其实他主要是将 LNMP 必要组建安装，写成 Shell 脚本一次性安装（主要包括：Nginx,PHP,MySQL,FTP,Git等），并配有一些命令操作，但是之后你完全可以根据你自己需要修改各个服务的配置文件，不会受任何限制。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lnmp restart nginx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 nginx 操作")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("官方安装教程地址")])]),t._v(" "),s("p",[t._v("https://lnmp.org/install.html")]),t._v(" "),s("blockquote",[s("p",[t._v("安装步骤:")])]),t._v(" "),s("ul",[s("li",[t._v("使用putty或类似的SSH工具登陆VPS或服务器；")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// 登陆后运行\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("screen")]),t._v(" -S lnmp\n如果提示screen: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" not found 命令不存在可以执行：\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("screen")]),t._v(" 或 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" screen安装\n")])])]),s("ul",[s("li",[t._v("下载并安装LNMP一键安装包：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// 安装地址\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://soft.vpser.net/lnmp/lnmp1.5.tar.gz -cO lnmp1.5.tar.gz "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" zxf lnmp1.5.tar.gz "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" lnmp1.5 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ./install.sh lnmp\n// wget: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" not found\n用yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" 或 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" 命令安装。\n")])])]),s("h3",{attrs:{id:"_5-开放服务器端口（iptables）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-开放服务器端口（iptables）","aria-hidden":"true"}},[t._v("#")]),t._v(" 5.开放服务器端口（iptables）")]),t._v(" "),s("p",[t._v("之前我们已经在阿里云平台上开放了需要使用的端口，但是服务器防火墙也是需要开放对应的端口，双向控制端口的权限提高互联网服务的安全性。")]),t._v(" "),s("p",[t._v("CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。")]),t._v(" "),s("blockquote",[s("p",[t._v("1、关闭firewall：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl stop firewalld.service\nsystemctl disable firewalld.service\nsystemctl mask firewalld.service\n")])])]),s("blockquote",[s("p",[t._v("2、安装iptables防火墙")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" iptables-services -y\n")])])]),s("blockquote",[s("p",[t._v("3.启动设置防火墙")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# systemctl enable iptables")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# systemctl start iptables")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("4.查看防火墙状态")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// 查看启动状态\nsystemctl status iptables\n// 查看已经开发和禁用的端口\niptables -L -n \n")])])]),s("blockquote",[s("p",[t._v("5编辑防火墙，增加端口")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/sysconfig/iptables "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#编辑防火墙配置文件")]),t._v("\n-A INPUT -m state --state NEW -m tcp -p tcp --dport "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),t._v(" -j ACCEPT\n:wq"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#保存退出")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("6.重启配置，重启服务")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl restart iptables.service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#重启防火墙使配置生效")]),t._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" iptables.service "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置防火墙开机启动")]),t._v("\n")])])]),s("h3",{attrs:{id:"_6-添加一个web服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-添加一个web服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 6.添加一个WEB服务")]),t._v(" "),s("blockquote",[s("p",[t._v("添加域名服务")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("lnmp vhost "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v("\n// 输入刚刚域名解析的域名例如：www.yourdomain.com\n// 后面会提示：提示其他一些配置，如果第一次选择默认即可。\n")])])]),s("blockquote",[s("p",[t._v("一些我需要转移文件的操作")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("//压缩 解压 文件\ntar命令\n// 解包\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" zxvf FileName.tar\n// 打包\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" czvf FileName.tar DirName\n// 删除文件\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" test.php\n// 删除文件夹\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dir")]),t._v("\n// 把 test1/ 文件夹下所有内容拷贝到 test2/ 中去\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -r test1/* test2/\n// 修改文件夹 权限\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" /your/path/\n// 修改文件夹 用户组\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R root:root /your/path/\n")])])]),s("h3",{attrs:{id:"_7-lnmp-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-lnmp-配置文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 7.lnmp 配置文件")]),t._v(" "),s("blockquote",[s("p",[t._v("配置文件: 修改网站nginx 配置")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/nginx/conf/vhost/\n")])])]),s("blockquote",[s("p",[t._v("重写配置文件: 其中有默认的各种重写")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/nginx/conf/rewrite/\n")])])]),s("blockquote",[s("p",[t._v("同一套代码对应多服务器")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// 在指定服务器配置文件中如下修改\nserver_name www.lnfilm.cn www.noasis.cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("引入重写文件")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("include lnweb.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# URL 重写规则：去掉 index.php")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("-f "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_filename")]),t._v("/index.php"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rewrite "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v("/index.php"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-f "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_filename")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rewrite "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" /index.php"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("注意：如果你按照上面配置了以后，你就可以在你添加 WEB 服务的根目录下创建 index.php 文件。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("?php \nphpinfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("访问：http://你的域名/index.php 即可访问")]),t._v(" "),s("h3",{attrs:{id:"_8-创建-mysql-远程登录账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-创建-mysql-远程登录账号","aria-hidden":"true"}},[t._v("#")]),t._v(" 8.创建 MySQL 远程登录账号")]),t._v(" "),s("blockquote",[s("p",[t._v("登录Mysql")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// 登录数据库    \nmysql -uroot -p\n// 输入密码\n****\n// 创建用户\n")])])]),s("blockquote",[s("p",[t._v("创建远程用户")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// 创建一个用户\nCREATE user remote@'localhost' IDENTIFIED BY 'remote';\n// 给此账号远程登录权限\nGRANT ALL PRIVILEGES ON *.* TO 'remote'@'%' IDENTIFIED BY 'remote' WITH GRANT OPTION;\n// 指定IP 指定数据库\nGRANT ALL PRIVILEGES ON *.* TO '用户名'@'IP' IDENTIFIED BY '密码' WITH GRANT OPTION;\n// 授权数据库的多张表\nGRANT ALL PRIVILEGES ON db_zhuangweionline.* to 'zwonline'@'%' identified by '123' WITH GRANT OPTION;\n\nFLUSH PRIVILEGES;\n")])])]),s("blockquote",[s("p",[t._v("关闭远程用户：删掉即可")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("DROP user 'remote'@'%';\n// 更新操作\nFLUSH PRIVILEGES;\n")])])]),s("p",[t._v("注意：如果你使用例如 Navicate 软件远程登录，如果忽略我上面介绍的端口开放操作，远程链接数据库依旧会失败。")]),t._v(" "),s("h3",{attrs:{id:"_9-我常用的-git-操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-我常用的-git-操作","aria-hidden":"true"}},[t._v("#")]),t._v(" 9.我常用的 Git 操作")]),t._v(" "),s("blockquote",[s("p",[t._v("1.克隆代码")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone 地址 \n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone 地址 -b dev "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev 是分支名字"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("2.添加文件")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" // 添加所有文件\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"文件路径"')]),t._v(" // 添加指定文件\n")])])]),s("blockquote",[s("p",[t._v("3.提交请求")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -am "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"注释"')]),t._v("\n")])])]),s("blockquote",[s("ol",{attrs:{start:"4"}},[s("li",[t._v("推送代码")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("默认推送到master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin dev （推送到指定分支dev）\n")])])]),s("blockquote",[s("ol",{attrs:{start:"5"}},[s("li",[t._v("获取最新代码")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin master\n")])])]),s("blockquote",[s("ol",{attrs:{start:"6"}},[s("li",[t._v("切换分支")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("git checkout dev (切换到 dev 分支)\n")])])]),s("blockquote",[s("ol",{attrs:{start:"7"}},[s("li",[t._v("删除已经 add 的文件")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" --cached "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"文件路径” // 不会删除物理文件，仅仅删除git缓存\ngit rm --f "')]),t._v('文件路径"  // 不仅删除git 缓存而且删除物理文件\n')])])]),s("blockquote",[s("ol",{attrs:{start:"8"}},[s("li",[t._v("恢复已删除文件")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --hard origin/master\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" pull origin master\n")])])]),s("blockquote",[s("ol",{attrs:{start:"9"}},[s("li",[t._v("如果强制git clone 到一个 非空文件夹中")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("）找一个临时文件夹：tmp/   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone 到其中\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("）复制 tmp/ 下的 .git 文件夹到 你想要的非空文件夹当中\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("）git reset --hard origin/master  选择你自己需要的分支\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("）git pull origin master\n")])])]),s("blockquote",[s("ol",{attrs:{start:"10"}},[s("li",[t._v("创建分支")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("）创建分支\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch V2\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("）将分支同步到服务器\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin V2\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("）切换分支\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout V2\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("）修改V2分支上的文件\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("）提交本地代码：\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -am “V2修改”\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("）提交到服务器\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin V2\n// "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("）讲V2分支合并到主干上\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout master\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge V2\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n")])])]),s("h3",{attrs:{id:"_10-open-basedir-restriction-in-effect-错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-open-basedir-restriction-in-effect-错误","aria-hidden":"true"}},[t._v("#")]),t._v(" 10.open_basedir restriction in effect 错误")]),t._v(" "),s("blockquote",[s("p",[t._v("在将数据库参数引用拿出到服务器之外时，会遇到这个错误。需要修改 basedir 操作如下")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/nginx/conf/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" fastcgi.conf\n// 修改如下：\nfastcgi_param PHP_ADMIN_VALUE "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"open_basedir='),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$document_root")]),t._v('/:/tmp/:/proc/:/home/www/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])},[],!1,null,null,null);a.default=n.exports}}]);