(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{292:function(a,s,t){"use strict";t.r(s);var e=t(38),r=Object(e.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"安装-rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-rabbitmq","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装 RabbitMQ")]),a._v(" "),t("h4",{attrs:{id:"写在前面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#写在前面","aria-hidden":"true"}},[a._v("#")]),a._v(" 写在前面")]),a._v(" "),t("p",[a._v("前面的教程主要以 CentOS 7.* 作为服务器进行安装 RabbitMQ(因为 CentOS7 已经足够稳定,能升级到 CentOS7 还是推荐升级)")]),a._v(" "),t("h2",{attrs:{id:"添加-erlang-源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加-erlang-源","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加 erlang 源")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://packages.erlang-solutions.com/erlang-solutions-1.0-1.noarch.rpm\n// 如果没有安装epel-release, 会出现错误:epel-release is needed by erlang-solutions-1.0-1.noarch\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" epel-release\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -Uvh erlang-solutions-1.0-1.noarch.rpm\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" erlang -y\n")])])]),t("h2",{attrs:{id:"安装-rabbitmq-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-rabbitmq-2","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装 RabbitMQ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://www.rabbitmq.com/releases/rabbitmq-server/v3.6.6/rabbitmq-server-3.6.6-1.el7.noarch.rpm\n\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" rabbitmq-server-3.6.6-1.el7.noarch.rpm\n")])])]),t("h2",{attrs:{id:"rabbitmq-常用操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq-常用操作","aria-hidden":"true"}},[a._v("#")]),a._v(" RabbitMQ 常用操作")]),a._v(" "),t("blockquote",[t("p",[a._v("开机启动 RabbitMQ")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chkconfig")]),a._v(" rabbitmq-server on\n")])])]),t("blockquote",[t("p",[a._v("启动服务")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/sbin/service rabbitmq-server start\n")])])]),t("blockquote",[t("p",[a._v("启动服务状态")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/sbin/service rabbitmq-server status\n")])])]),t("blockquote",[t("p",[a._v("关闭服务")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/sbin/service rabbitmq-server stop\n")])])]),t("blockquote",[t("p",[a._v("重启服务")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("/sbin/service rabbitmq-server restart\n")])])]),t("blockquote",[t("p",[a._v("查看当前用户")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl list_users\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出结果:")]),a._v("\nListing "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("users")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\nguest   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("administrator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("默认会有一个 gust 用户, 查看 guest 权限")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl list_user_permissions guest\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出结果:")]),a._v("\nListing permissions "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" user "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"guest"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n/       .*      .*      .*\n")])])]),t("blockquote",[t("p",[a._v("建议删除默认用户")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl delete_user guest\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出结果:")]),a._v("\nDeleting user "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"guest"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),t("blockquote",[t("p",[a._v("添加新用户")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl add_user username password\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# username 是 需要设置的用户名")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# password 是 需要设计的密码")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("设置用户组")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl set_user_tags username administrator\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# username 是 上面你设置的用户名")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("为新建用户赋权, 这里设置最高权限")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl set_permissions -p / username "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('".*"')]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("查看权限")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmqctl list_user_permissions username\n")])])]),t("blockquote",[t("p",[a._v("开启 RabbitMQ WEB 管理.")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("rabbitmq-plugins "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("enable")]),a._v(" rabbitmq_management\n")])])]),t("blockquote",[t("p",[a._v("开启端口")])]),a._v(" "),t("p",[a._v("端口号: 15672")]),a._v(" "),t("p",[a._v("我是用的云服务器是阿里云,同时设置了 iptable 防火墙,所以 云服务器平台的安全组和 iptable 都需要打开 15672 端口")]),a._v(" "),t("p",[a._v("访问地址: [本地] http://localhost:15672 或者 [服务器] http://服务器IP:15672")]),a._v(" "),t("h2",{attrs:{id:"爬坑记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#爬坑记录","aria-hidden":"true"}},[a._v("#")]),a._v(" 爬坑记录")]),a._v(" "),t("h3",{attrs:{id:"_1-erl-command-not-found"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-erl-command-not-found","aria-hidden":"true"}},[a._v("#")]),a._v(" 1. erl: command not found")]),a._v(" "),t("p",[a._v("原因: 安装 erlang 时, 没有设置环境变量. 一般安装好, 服务器会识别 erl 命令, 我重新安装 erlang 后就可以了")]),a._v(" "),t("h3",{attrs:{id:"_2-启动失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动失败","aria-hidden":"true"}},[a._v("#")]),a._v(" 2. 启动失败")]),a._v(" "),t("p",[a._v("suggestion: start the node, 我在网上找了很多教程")]),a._v(" "),t("p",[a._v("[网上教程地址]https://stackoverflow.com/questions/8633882/rabbitmq-on-ubuntu-10-04-server")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("// 使用 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hostname")]),a._v(" 获取服务器的 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("hostname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/hosts\n        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 localhost.localdomain   localhost  YOUR-"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("HOSTNAME")]),a._v("\n        ::1       localhost6.localdomain6 localhost6\n保存:wq\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" rabbitmq-server start\n")])])]),t("h3",{attrs:{id:"_3-centos-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-centos-6","aria-hidden":"true"}},[a._v("#")]),a._v(" 3. CentOS 6.*")]),a._v(" "),t("h3",{attrs:{id:"centos6-需要安装-socat依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos6-需要安装-socat依赖","aria-hidden":"true"}},[a._v("#")]),a._v(" centos6 需要安装 socat依赖")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" http://ftp.tu-chemnitz.de/pub/linux/dag/redhat/el6/en/x86_64/rpmforge/RPMS/socat-1.7.2.4-1.el6.rf.x86_64.rpm\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" socat-1.7.2.4-1.el6.rf.x86_64.rpm\n")])])]),t("h4",{attrs:{id:"安装-erlang"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-erlang","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装 erlang")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://packages.erlang-solutions.com/erlang/rpm/centos/6/x86_64/esl-erlang_19.1.5-1~centos~6_amd64.rpm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -Uvh esl-erlang_19.1.5-1~centos~6_amd64.rpm\n")])])]),t("h3",{attrs:{id:"安装-rabbitmq-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-rabbitmq-3","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装 RabbitMQ")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" --import https://www.rabbitmq.com/rabbitmq-release-signing-key.asc\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://www.rabbitmq.com/releases/rabbitmq-server/v3.6.6/rabbitmq-server-3.6.6-1.el6.noarch.rpm\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" -ivh --nodeps rabbitmq-server-3.6.6-1.el6.noarch.rpm\n")])])]),t("h2",{attrs:{id:"php-使用-rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#php-使用-rabbitmq","aria-hidden":"true"}},[a._v("#")]),a._v(" PHP 使用 RabbitMQ")]),a._v(" "),t("h3",{attrs:{id:"_1-安装扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装扩展","aria-hidden":"true"}},[a._v("#")]),a._v(" 1. 安装扩展")]),a._v(" "),t("p",[a._v("常见的扩展需要: mbstring dom curl bcmath")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" php-bcmath\n")])])]),t("h2",{attrs:{id:"_2-php-类库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-php-类库","aria-hidden":"true"}},[a._v("#")]),a._v(" ### 2. php 类库")]),a._v(" "),t("p",[a._v("https://github.com/php-amqplib/php-amqplib")]),a._v(" "),t("h2",{attrs:{id:"文章推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#文章推荐","aria-hidden":"true"}},[a._v("#")]),a._v(" 文章推荐")]),a._v(" "),t("p",[a._v("错误解决")]),a._v(" "),t("p",[a._v("https://stackoverflow.com/questions/8633882/rabbitmq-on-ubuntu-10-04-server")]),a._v(" "),t("p",[a._v("卸载命令")]),a._v(" "),t("p",[a._v("https://blog.csdn.net/zwhfyy/article/details/82769736")]),a._v(" "),t("p",[a._v("安装过程")]),a._v(" "),t("p",[a._v("https://www.cnblogs.com/yw0219/p/8933917.html")]),a._v(" "),t("p",[a._v("php 进程常驻")]),a._v(" "),t("p",[a._v("https://www.cnblogs.com/seans/p/3857925.html")])])},[],!1,null,null,null);s.default=r.exports}}]);