<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP 服务器搭建全攻略 | zZ爱吃菜</title>
    <meta name="description" content="记录开发，记录生活">
    <link rel="icon" href="/img/logo.jpg">
  <link rel="stylesheet" href="/css/style.css">
  <script charset="utf-8" src="/js/main.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.626fedcf.css" as="style"><link rel="preload" href="/assets/js/app.d9b0a8be.js" as="script"><link rel="preload" href="/assets/js/2.dfeefe94.js" as="script"><link rel="preload" href="/assets/js/48.61786f7c.js" as="script"><link rel="prefetch" href="/assets/js/10.e7a674a5.js"><link rel="prefetch" href="/assets/js/11.4c8bf6d5.js"><link rel="prefetch" href="/assets/js/12.4e0fd2f1.js"><link rel="prefetch" href="/assets/js/13.e8c8f626.js"><link rel="prefetch" href="/assets/js/14.10696f84.js"><link rel="prefetch" href="/assets/js/15.f8a89e08.js"><link rel="prefetch" href="/assets/js/16.1eb5263d.js"><link rel="prefetch" href="/assets/js/17.4ddc1a01.js"><link rel="prefetch" href="/assets/js/18.c9fd674d.js"><link rel="prefetch" href="/assets/js/19.c2c69591.js"><link rel="prefetch" href="/assets/js/20.65d01b8c.js"><link rel="prefetch" href="/assets/js/21.e6d01b88.js"><link rel="prefetch" href="/assets/js/22.33adbd14.js"><link rel="prefetch" href="/assets/js/23.118165f1.js"><link rel="prefetch" href="/assets/js/24.ada5e265.js"><link rel="prefetch" href="/assets/js/25.f0ed3bf8.js"><link rel="prefetch" href="/assets/js/26.e32e4e04.js"><link rel="prefetch" href="/assets/js/27.bd826510.js"><link rel="prefetch" href="/assets/js/28.99d06e23.js"><link rel="prefetch" href="/assets/js/29.5b4419ec.js"><link rel="prefetch" href="/assets/js/3.a78a1311.js"><link rel="prefetch" href="/assets/js/30.b2cb92b1.js"><link rel="prefetch" href="/assets/js/31.c0466e6c.js"><link rel="prefetch" href="/assets/js/32.e184aa1f.js"><link rel="prefetch" href="/assets/js/33.7a83e3fe.js"><link rel="prefetch" href="/assets/js/34.1951b7b7.js"><link rel="prefetch" href="/assets/js/35.d76d9386.js"><link rel="prefetch" href="/assets/js/36.72f6a253.js"><link rel="prefetch" href="/assets/js/37.bf4d697b.js"><link rel="prefetch" href="/assets/js/38.bbb2dce8.js"><link rel="prefetch" href="/assets/js/39.26c29e6f.js"><link rel="prefetch" href="/assets/js/4.a640192c.js"><link rel="prefetch" href="/assets/js/40.8355738f.js"><link rel="prefetch" href="/assets/js/41.e1f1230b.js"><link rel="prefetch" href="/assets/js/42.d4a8991e.js"><link rel="prefetch" href="/assets/js/43.cb8a7199.js"><link rel="prefetch" href="/assets/js/44.f2da1d0c.js"><link rel="prefetch" href="/assets/js/45.b95d08b5.js"><link rel="prefetch" href="/assets/js/46.e0cea998.js"><link rel="prefetch" href="/assets/js/47.d9461b52.js"><link rel="prefetch" href="/assets/js/49.3987afca.js"><link rel="prefetch" href="/assets/js/5.d7099aa7.js"><link rel="prefetch" href="/assets/js/50.159bf9af.js"><link rel="prefetch" href="/assets/js/51.d6ad7976.js"><link rel="prefetch" href="/assets/js/52.3c9d6bb6.js"><link rel="prefetch" href="/assets/js/53.457392fd.js"><link rel="prefetch" href="/assets/js/54.289f8965.js"><link rel="prefetch" href="/assets/js/55.7bea2695.js"><link rel="prefetch" href="/assets/js/56.b0d493cc.js"><link rel="prefetch" href="/assets/js/57.9ad7f812.js"><link rel="prefetch" href="/assets/js/58.ba4cb581.js"><link rel="prefetch" href="/assets/js/59.7b6814b7.js"><link rel="prefetch" href="/assets/js/6.10be9919.js"><link rel="prefetch" href="/assets/js/60.f757e747.js"><link rel="prefetch" href="/assets/js/61.6e65aff4.js"><link rel="prefetch" href="/assets/js/62.ed989088.js"><link rel="prefetch" href="/assets/js/63.fcf0b41d.js"><link rel="prefetch" href="/assets/js/64.eac23bf1.js"><link rel="prefetch" href="/assets/js/65.5503d6c5.js"><link rel="prefetch" href="/assets/js/66.03f5104b.js"><link rel="prefetch" href="/assets/js/67.48e84939.js"><link rel="prefetch" href="/assets/js/68.2ed028b5.js"><link rel="prefetch" href="/assets/js/7.c17c72ee.js"><link rel="prefetch" href="/assets/js/8.593bcd4c.js"><link rel="prefetch" href="/assets/js/9.3d01efee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.626fedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">zZ爱吃菜</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">随笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/php/" class="nav-link router-link-active">PHP</a></li><li class="dropdown-subitem"><a href="/notebook/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/notebook/java/" class="nav-link">JAVA</a></li><li class="dropdown-subitem"><a href="/notebook/server/" class="nav-link">服务器</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/js/" class="nav-link">Javascript</a></li><li class="dropdown-subitem"><a href="/notebook/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/notebook/flutter/" class="nav-link">Flutter</a></li><li class="dropdown-subitem"><a href="/notebook/ios/" class="nav-link">iOS</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">进阶之路</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/advance/oop/" class="nav-link">PHP面向对象编程</a></li><li class="dropdown-item"><!----> <a href="/advance/cit/" class="nav-link">CIT框架设计</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的项目</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/lwadmin/" class="nav-link">LW.ADMIN</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>在线编辑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>在线服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>博客指南</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">随笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/php/" class="nav-link router-link-active">PHP</a></li><li class="dropdown-subitem"><a href="/notebook/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/notebook/java/" class="nav-link">JAVA</a></li><li class="dropdown-subitem"><a href="/notebook/server/" class="nav-link">服务器</a></li></ul></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/notebook/js/" class="nav-link">Javascript</a></li><li class="dropdown-subitem"><a href="/notebook/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/notebook/flutter/" class="nav-link">Flutter</a></li><li class="dropdown-subitem"><a href="/notebook/ios/" class="nav-link">iOS</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">进阶之路</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/advance/oop/" class="nav-link">PHP面向对象编程</a></li><li class="dropdown-item"><!----> <a href="/advance/cit/" class="nav-link">CIT框架设计</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">我的项目</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/project/lwadmin/" class="nav-link">LW.ADMIN</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>在线编辑</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>在线服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>博客指南</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>PHP随笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/php/7/1.html" class="sidebar-link">安装 RabbitMQ</a></li><li><a href="/notebook/php/6/1.html" class="sidebar-link">关于微信支付</a></li><li><a href="/notebook/php/5/1.html" class="sidebar-link">UEditor 富文本视频上传</a></li><li><a href="/notebook/php/4/1.html" class="active sidebar-link">PHP 服务器搭建全攻略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#主要步骤" class="sidebar-link">主要步骤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_1-阿里云平台购买服务器（ecs）和-域名（略）" class="sidebar-link">1.阿里云平台购买服务器（ECS）和 域名（略）</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_2-阿里云服务器管理后台开放端口" class="sidebar-link">2.阿里云服务器管理后台开放端口</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_3-阿里云域名解析" class="sidebar-link">3. 阿里云域名解析</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_4-一键安装-lnmp" class="sidebar-link">4. 一键安装 LNMP</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_5-开放服务器端口（iptables）" class="sidebar-link">5.开放服务器端口（iptables）</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_6-添加一个web服务" class="sidebar-link">6.添加一个WEB服务</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_7-lnmp-配置文件" class="sidebar-link">7.lnmp 配置文件</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_8-创建-mysql-远程登录账号" class="sidebar-link">8.创建 MySQL 远程登录账号</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_9-我常用的-git-操作" class="sidebar-link">9.我常用的 Git 操作</a></li><li class="sidebar-sub-header"><a href="/notebook/php/4/1.html#_10-open-basedir-restriction-in-effect-错误" class="sidebar-link">10.open_basedir restriction in effect 错误</a></li></ul></li></ul></li><li><a href="/notebook/php/3/1.html" class="sidebar-link">多数组全排列</a></li><li><a href="/notebook/php/2/1.html" class="sidebar-link">多维数组 SELECT 联动</a></li><li><a href="/notebook/php/1/1.html" class="sidebar-link">PHP 解析 html 类</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php-服务器搭建全攻略"><a href="#php-服务器搭建全攻略" aria-hidden="true" class="header-anchor">#</a> PHP 服务器搭建全攻略</h1> <h4 id="写在前面"><a href="#写在前面" aria-hidden="true" class="header-anchor">#</a> 写在前面</h4> <p>本次主要记录，我作为一个PHP后端开发者如果从零部署一台阿里云服务器到生产的。</p> <p>另外，本文重点是记录服务器（系统：CentOS 7.*）配置相关操作，其他操作都会简单介绍一下。</p> <h2 id="主要步骤"><a href="#主要步骤" aria-hidden="true" class="header-anchor">#</a> 主要步骤</h2> <ol><li>阿里云平台购买服务器（ECS）和 域名（略）</li> <li>阿里云服务器管理后台开放端口</li> <li>阿里云域名解析</li> <li>一键安装 LNMP</li> <li>开放服务器端口（iptables）</li> <li>添加一个WEB服务</li> <li>创建 MySQL 远程登录账号</li> <li>Git 常规操作</li></ol> <h3 id="_1-阿里云平台购买服务器（ecs）和-域名（略）"><a href="#_1-阿里云平台购买服务器（ecs）和-域名（略）" aria-hidden="true" class="header-anchor">#</a> 1.阿里云平台购买服务器（ECS）和 域名（略）</h3> <p><a href="https://www.aliyun.com" target="_blank" rel="noopener noreferrer">购买地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_2-阿里云服务器管理后台开放端口"><a href="#_2-阿里云服务器管理后台开放端口" aria-hidden="true" class="header-anchor">#</a> 2.阿里云服务器管理后台开放端口</h3> <blockquote><p>国内很多云服务供应商，目前我知道的（天翼云，百度云，阿里云）都需要在云平台事先开通服务器需要的指定端口，服务器才能生效。</p></blockquote> <p>主要步骤</p> <ol><li>登录阿里云管理后台</li> <li>进入示例管理</li> <li>在指定服务器后面进入网络和安全组</li> <li>配置规则即可，主要开放端口</li></ol> <p>常用的端口介绍</p> <table><thead><tr><th>端口</th> <th>介绍</th></tr></thead> <tbody><tr><td>22</td> <td>SSH 端口远程登录服务器</td></tr> <tr><td>80</td> <td>http 默认端口，国内服务器需要备案才能使用</td></tr> <tr><td>443</td> <td>https 默认端口</td></tr> <tr><td>3306</td> <td>数据库默认端口</td></tr></tbody></table> <p>注意：如果想要安全，其实可以为不同服务配置非默认端口，降低服务器被攻击的风险，不过需要修改对应服务的配置文件，这里不详细介绍。</p> <h3 id="_3-阿里云域名解析"><a href="#_3-阿里云域名解析" aria-hidden="true" class="header-anchor">#</a> 3. 阿里云域名解析</h3> <p>阿里云域名解析也很简单，顾名思义：通过域名指向服务器，以达到域名可以访问服务器的效果。</p> <p>步骤：</p> <ol><li>登录阿里云管理后台</li> <li>在域名管理，在指定域名选择域名解析</li> <li>根据提示选择指定解析方式（都有详细说明）</li></ol> <h3 id="_4-一键安装-lnmp"><a href="#_4-一键安装-lnmp" aria-hidden="true" class="header-anchor">#</a> 4. 一键安装 LNMP</h3> <p>主要使用 LNMP一键安装，这套东西我用了很久了，其实他主要是将 LNMP 必要组建安装，写成 Shell 脚本一次性安装（主要包括：Nginx,PHP,MySQL,FTP,Git等），并配有一些命令操作，但是之后你完全可以根据你自己需要修改各个服务的配置文件，不会受任何限制。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>lnmp restart nginx <span class="token comment"># 重启 nginx 操作</span>
</code></pre></div><blockquote><p>官方安装教程地址</p></blockquote> <p>https://lnmp.org/install.html</p> <blockquote><p>安装步骤:</p></blockquote> <ul><li>使用putty或类似的SSH工具登陆VPS或服务器；</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>// 登陆后运行
<span class="token function">screen</span> -S lnmp
如果提示screen: <span class="token builtin class-name">command</span> not found 命令不存在可以执行：
yum <span class="token function">install</span> <span class="token function">screen</span> 或 <span class="token function">apt-get</span> <span class="token function">install</span> screen安装
</code></pre></div><ul><li>下载并安装LNMP一键安装包：</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>// 安装地址
<span class="token function">wget</span> http://soft.vpser.net/lnmp/lnmp1.5.tar.gz -cO lnmp1.5.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> zxf lnmp1.5.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> lnmp1.5 <span class="token operator">&amp;&amp;</span> ./install.sh lnmp
// wget: <span class="token builtin class-name">command</span> not found
用yum <span class="token function">install</span> <span class="token function">wget</span> 或 <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">wget</span> 命令安装。
</code></pre></div><h3 id="_5-开放服务器端口（iptables）"><a href="#_5-开放服务器端口（iptables）" aria-hidden="true" class="header-anchor">#</a> 5.开放服务器端口（iptables）</h3> <p>之前我们已经在阿里云平台上开放了需要使用的端口，但是服务器防火墙也是需要开放对应的端口，双向控制端口的权限提高互联网服务的安全性。</p> <p>CentOS 7.0默认使用的是firewall作为防火墙，这里改为iptables防火墙。</p> <blockquote><p>1、关闭firewall：</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl stop firewalld.service
systemctl disable firewalld.service
systemctl mask firewalld.service
</code></pre></div><blockquote><p>2、安装iptables防火墙</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> iptables-services -y
</code></pre></div><blockquote><p>3.启动设置防火墙</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># systemctl enable iptables</span>
<span class="token comment"># systemctl start iptables</span>
</code></pre></div><blockquote><p>4.查看防火墙状态</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>// 查看启动状态
systemctl status iptables
// 查看已经开发和禁用的端口
iptables -L -n 
</code></pre></div><blockquote><p>5编辑防火墙，增加端口</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vi</span> /etc/sysconfig/iptables <span class="token comment">#编辑防火墙配置文件</span>
-A INPUT -m state --state NEW -m tcp -p tcp --dport <span class="token number">22</span> -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport <span class="token number">80</span> -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport <span class="token number">3306</span> -j ACCEPT
:wq<span class="token operator">!</span> <span class="token comment">#保存退出</span>
</code></pre></div><blockquote><p>6.重启配置，重启服务</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl restart iptables.service <span class="token comment">#重启防火墙使配置生效</span>
systemctl <span class="token builtin class-name">enable</span> iptables.service <span class="token comment">#设置防火墙开机启动</span>
</code></pre></div><h3 id="_6-添加一个web服务"><a href="#_6-添加一个web服务" aria-hidden="true" class="header-anchor">#</a> 6.添加一个WEB服务</h3> <blockquote><p>添加域名服务</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>lnmp vhost <span class="token function">add</span>
// 输入刚刚域名解析的域名例如：www.yourdomain.com
// 后面会提示：提示其他一些配置，如果第一次选择默认即可。
</code></pre></div><blockquote><p>一些我需要转移文件的操作</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>//压缩 解压 文件
tar命令
// 解包
<span class="token function">tar</span> zxvf FileName.tar
// 打包
<span class="token function">tar</span> czvf FileName.tar DirName
// 删除文件
<span class="token function">rm</span> test.php
// 删除文件夹
<span class="token function">rm</span> -rf <span class="token function">dir</span>
// 把 test1/ 文件夹下所有内容拷贝到 test2/ 中去
<span class="token function">cp</span> -r test1/* test2/
// 修改文件夹 权限
<span class="token function">chmod</span> -R <span class="token number">777</span> /your/path/
// 修改文件夹 用户组
<span class="token function">chown</span> -R root:root /your/path/
</code></pre></div><h3 id="_7-lnmp-配置文件"><a href="#_7-lnmp-配置文件" aria-hidden="true" class="header-anchor">#</a> 7.lnmp 配置文件</h3> <blockquote><p>配置文件: 修改网站nginx 配置</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/nginx/conf/vhost/
</code></pre></div><blockquote><p>重写配置文件: 其中有默认的各种重写</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local/nginx/conf/rewrite/
</code></pre></div><blockquote><p>同一套代码对应多服务器</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>// 在指定服务器配置文件中如下修改
server_name www.lnfilm.cn www.noasis.cn<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>引入重写文件</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>include lnweb.conf<span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># URL 重写规则：去掉 index.php</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>-f <span class="token variable">$request_filename</span>/index.php<span class="token punctuation">)</span><span class="token punctuation">{</span>
    rewrite <span class="token punctuation">(</span>.*<span class="token punctuation">)</span> <span class="token variable">$1</span>/index.php<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>-f <span class="token variable">$request_filename</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    rewrite <span class="token punctuation">(</span>.*<span class="token punctuation">)</span> /index.php<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：如果你按照上面配置了以后，你就可以在你添加 WEB 服务的根目录下创建 index.php 文件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&lt;</span>?php 
phpinfo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>访问：http://你的域名/index.php 即可访问</p> <h3 id="_8-创建-mysql-远程登录账号"><a href="#_8-创建-mysql-远程登录账号" aria-hidden="true" class="header-anchor">#</a> 8.创建 MySQL 远程登录账号</h3> <blockquote><p>登录Mysql</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>// 登录数据库    
mysql -uroot -p
// 输入密码
****
// 创建用户
</code></pre></div><blockquote><p>创建远程用户</p></blockquote> <div class="language-mysql extra-class"><pre class="language-text"><code>// 创建一个用户
CREATE user remote@'localhost' IDENTIFIED BY 'remote';
// 给此账号远程登录权限
GRANT ALL PRIVILEGES ON *.* TO 'remote'@'%' IDENTIFIED BY 'remote' WITH GRANT OPTION;
// 指定IP 指定数据库
GRANT ALL PRIVILEGES ON *.* TO '用户名'@'IP' IDENTIFIED BY '密码' WITH GRANT OPTION;
// 授权数据库的多张表
GRANT ALL PRIVILEGES ON db_zhuangweionline.* to 'zwonline'@'%' identified by '123' WITH GRANT OPTION;

FLUSH PRIVILEGES;
</code></pre></div><blockquote><p>关闭远程用户：删掉即可</p></blockquote> <div class="language-mysql extra-class"><pre class="language-text"><code>DROP user 'remote'@'%';
// 更新操作
FLUSH PRIVILEGES;
</code></pre></div><p>注意：如果你使用例如 Navicate 软件远程登录，如果忽略我上面介绍的端口开放操作，远程链接数据库依旧会失败。</p> <h3 id="_9-我常用的-git-操作"><a href="#_9-我常用的-git-操作" aria-hidden="true" class="header-anchor">#</a> 9.我常用的 Git 操作</h3> <blockquote><p>1.克隆代码</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone 地址 
<span class="token function">git</span> clone 地址 -b dev <span class="token punctuation">(</span>dev 是分支名字<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>2.添加文件</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> // 添加所有文件
<span class="token function">git</span> <span class="token function">add</span> <span class="token string">&quot;文件路径&quot;</span> // 添加指定文件
</code></pre></div><blockquote><p>3.提交请求</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> commit -am <span class="token string">&quot;注释&quot;</span>
</code></pre></div><blockquote><ol start="4"><li>推送代码</li></ol></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> push <span class="token punctuation">(</span>默认推送到master<span class="token punctuation">)</span>		
<span class="token function">git</span> push origin dev （推送到指定分支dev）
</code></pre></div><blockquote><ol start="5"><li>获取最新代码</li></ol></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> pull origin master
</code></pre></div><blockquote><ol start="6"><li>切换分支</li></ol></blockquote> <div class="language- extra-class"><pre class="language-text"><code>git checkout dev (切换到 dev 分支)
</code></pre></div><blockquote><ol start="7"><li>删除已经 add 的文件</li></ol></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> <span class="token function">rm</span> --cached <span class="token string">&quot;文件路径” // 不会删除物理文件，仅仅删除git缓存
git rm --f &quot;</span>文件路径&quot;  // 不仅删除git 缓存而且删除物理文件
</code></pre></div><blockquote><ol start="8"><li>恢复已删除文件</li></ol></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> reset --hard origin/master
<span class="token function">git</span> pull origin master
</code></pre></div><blockquote><ol start="9"><li>如果强制git clone 到一个 非空文件夹中</li></ol></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>）找一个临时文件夹：tmp/   <span class="token function">git</span> clone 到其中
<span class="token number">2</span>）复制 tmp/ 下的 .git 文件夹到 你想要的非空文件夹当中
<span class="token number">3</span>）git reset --hard origin/master  选择你自己需要的分支
<span class="token number">4</span>）git pull origin master
</code></pre></div><blockquote><ol start="10"><li>创建分支</li></ol></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>// <span class="token number">1</span>）创建分支
<span class="token function">git</span> branch V2
// <span class="token number">2</span>）将分支同步到服务器
<span class="token function">git</span> push origin V2
// <span class="token number">3</span>）切换分支
<span class="token function">git</span> checkout V2
// <span class="token number">4</span>）修改V2分支上的文件
// <span class="token number">5</span>）提交本地代码：
<span class="token function">git</span> commit -am “V2修改”
// <span class="token number">6</span>）提交到服务器
<span class="token function">git</span> push origin V2
// <span class="token number">7</span>）讲V2分支合并到主干上
<span class="token function">git</span> checkout master
<span class="token function">git</span> merge V2
<span class="token function">git</span> push
</code></pre></div><h3 id="_10-open-basedir-restriction-in-effect-错误"><a href="#_10-open-basedir-restriction-in-effect-错误" aria-hidden="true" class="header-anchor">#</a> 10.open_basedir restriction in effect 错误</h3> <blockquote><p>在将数据库参数引用拿出到服务器之外时，会遇到这个错误。需要修改 basedir 操作如下</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /usr/local/nginx/conf/
<span class="token function">vi</span> fastcgi.conf
// 修改如下：
fastcgi_param PHP_ADMIN_VALUE <span class="token string">&quot;open_basedir=<span class="token variable">$document_root</span>/:/tmp/:/proc/:/home/www/&quot;</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/14/2020, 5:33:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/notebook/php/5/1.html" class="prev">
          UEditor 富文本视频上传
        </a></span> <span class="next"><a href="/notebook/php/3/1.html">
          多数组全排列
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d9b0a8be.js" defer></script><script src="/assets/js/2.dfeefe94.js" defer></script><script src="/assets/js/48.61786f7c.js" defer></script>
  </body>
</html>
